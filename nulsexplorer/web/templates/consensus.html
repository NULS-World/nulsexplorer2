{% extends "base.html" %}

{% block title %}Consensus Status{% endblock %}
{% block content %}
<div class="container">
  <h2 class="d-flex justify-content-between align-items-center">
    Agents <span> Block #{{consensus.height}}</span>
  </h2>
  <div class="row">
    {% for agent in consensus.agents %}
    {% if agent.status or (agent.creditVal != 0) %}
      {% if agent.creditVal < -0.5 %}
        {% set cardclass = 'bg-danger text-white' %}
        {% set progressclass = 'bg-danger' %}
      {% elif agent.creditVal < 0.5 %}
        {% set cardclass = 'bg-warning' %}
        {% set progressclass = 'bg-warning' %}
      {% else %}
        {% set cardclass = 'bg-success text-white' %}
        {% set progressclass = 'bg-success' %}
      {% endif %}
    {% else %}
      {% set cardclass = 'bg-light' %}
      {% set progressclass = 'bg-primary' %}
    {% endif %}
    <div class="col-md-6 col-lg-4">
      <div class="card mb-5 mx-2 {{cardclass}}">
        <div class="card-header">
            <span class="float-right badge {{('badge-warning', 'badge-success')[agent.status]}}">
              {{('stopped', 'running')[agent.status]}}
            </span>
            {{agent.agentId}}
        </div>
          <div class="progress" style="height: 2px">
            <div class="progress-bar progress-bar-striped progress-bar-animated {{progressclass}}" role="progressbar"
              aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: {{ ((agent.creditVal+1)/2)*100 }}%"></div>
          </div>
            <ul class="list-group list-group-flush text-dark" style="font-size:.8rem;">
              <li class="list-group-item d-flex justify-content-between align-items-center">
                Address:
                <span class="d-inline-block text-truncate">
                  <a href="/addresses/{{agent.agentAddress}}">
                    {{agent.agentName or agent.agentAddress}}
                  </a>
                </span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                Commission:
                <span class="d-inline-block text-truncate">{{agent.commissionRate}}%</span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                Bond:
                <span class="d-inline-block text-truncate">{{agent.deposit/100000000}}</span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                Participants:
                <span class="d-inline-block text-truncate">{{agent.memberCount}}</span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                Amount:
                <span class="d-inline-block text-truncate">{{agent.totalDeposit/100000000}}</span>
              </li>
            </ul>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}

<div class="card mb-3 text-center bg-danger text-white">
  <div class="card-body">
    <blockquote class="card-blockquote">
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a
        ante. Integer posuere erat a ante.</p>
      <footer>Someone famous in
        <cite title="Source Title">Source Title</cite>
      </footer>
    </blockquote>
  </div>
</div>
